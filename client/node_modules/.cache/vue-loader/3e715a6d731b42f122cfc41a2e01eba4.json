{"remainingRequest":"/var/www/html/Jobs/DOAN-TT/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/Jobs/DOAN-TT/client/src/views/authentication/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/Jobs/DOAN-TT/client/src/views/authentication/Login.vue","mtime":1573548269881},{"path":"/var/www/html/Jobs/DOAN-TT/client/node_modules/cache-loader/dist/cjs.js","mtime":1571633391755},{"path":"/var/www/html/Jobs/DOAN-TT/client/node_modules/babel-loader/lib/index.js","mtime":1571304325577},{"path":"/var/www/html/Jobs/DOAN-TT/client/node_modules/cache-loader/dist/cjs.js","mtime":1571633391755},{"path":"/var/www/html/Jobs/DOAN-TT/client/node_modules/vue-loader/lib/index.js","mtime":1571304326381}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapGetters, mapState } from 'vuex'\nimport axios from 'axios'\nimport jwtDecode from 'jwt-decode'\nimport facebookLogin from 'facebook-login-vuejs'\nimport GoogleLogin from 'vue-google-login'\nimport KakaoLogin from 'vue-kakao-login'\n\nimport { AUTH_REQUEST, AUTH_SUCCESS, AUTH_ERROR, AUTH_MODAL_BTN, AUTH_SET_FB } from '../../store/actions.type'\nimport { authentication } from '../../mixins/authentication'\nimport store from '../../store/store'\nimport { CHANGE_LANGUAGE_ACTION } from '../../store/actions.type'\nimport { LANGUAGES } from '../../i18n'\nimport AuthHeader from './AuthHeader'\nimport Error from '../../components/common/Error.modal'\nimport CustomLoader from '../../components/common/CustomLoader'\n\n// import '../../../scss/custom.scss';\nexport default {\n    name: \"Login\",\n    components: {\n      'custom-loader': CustomLoader,\n      Error, AuthHeader,\n      facebookLogin, GoogleLogin, KakaoLogin\n    },\n    mixins: [authentication],\n    data() {\n      return {\n        form: {\n          email: '',\n          password: '',\n          remember_me: false,\n        },\n        sform: {\n          first_name: '',\n          last_name: '',\n          email: '',\n          password: '',\n          password_confirmation: '',\n          remember_me: false,\n          provider_name: ''\n        },\n        validator: {\n          email: {\n            valid: true,\n            focus: false,\n            blured: false,\n            text: 'Please input a valid Email',\n            error: false,\n            last: ''\n          },\n          password: {\n            valid: true,\n            focus: false,\n            blured: false,\n            text: 'Password must be 6 ~ 12 length characters',\n            error: false,\n            last: ''\n          },\n        },\n        isLoginFailed: false,\n        isShowPassword: false,\n        pageLoading: false,\n        nosidebar: true,\n        languages: LANGUAGES,\n        testval: 'Test',\n\n        /** URL Integration */\n        client_url: process.env.VUE_APP_URL,\n        server_url: process.env.VUE_APP_SERVER_URL,\n        /** Facebook OAuth */\n        FB: undefined,\n        fbAppId: process.env.VUE_APP_FB_APP_ID,\n        isFBSuccess: false,\n        isFBConnected: false,\n        fbkey: 0,\n        /** Google OAuth2 */\n        googleLoginParams: {\n          client_id: process.env.VUE_APP_GOOGLE_CLIENT_ID\n        },\n        /** Line OAuth2 */\n        lineLoginParams: {\n          client_id: process.env.VUE_APP_LINE_CLIENT_ID,\n          scope: process.env.VUE_APP_LINE_SCOPE\n        },\n        /** Kakao OAuth */\n        kakaoLoginParams: {\n          api_key: process.env.VUE_APP_KAKAO_API_KEY\n        }\n      }\n    },\n    computed: {\n      ...mapGetters(['USER', 'loading', 'errors']),\n    },\n    mounted() {\n      this.FB = this.$store.getters.FB      \n\n      if (this.$route.params.email != undefined) {\n        this.onLLoginDone(this.$route.params.email)\n      } else {\n        if (this.FB == null) {\n          this.fbkey += 1\n          return\n        }\n      }\n    },\n    methods: {\n        onLogin(evt) {\n            var vm = this\n            vm.isLoginFailed = false\n            vm.pageLoading = true\n            \n            if (!vm.validate()) {\n              vm.pageLoading = false\n              return\n            }\n\n            vm.login(vm.form)\n              .then(response => {\n                vm.$store.dispatch(AUTH_REQUEST, response.data)\n                  .then(response => {\n                    response && response.data && vm.toHome();\n\n                    vm.pageLoading = !response\n                  })                          \n              })\n              .catch(error => {\n                console.log(error.response)\n                vm.isLoginFailed = true\n                vm.pageLoading = false\n                if (error.response.status == 422) {\n                  vm.$store.dispatch(AUTH_ERROR, error.response.data.errors)\n                } else if (error.response.status == 401) {\n                  var errors = error.response.data.errors\n                  if (errors.email) {\n                    vm.validator.email.error = true\n                    vm.validator.email.text = errors.email[0]\n                    vm.validator.email.last = vm.form.email\n                  } else if (errors.password) {\n                    vm.validator.password.error = true\n                    vm.validator.password.text = errors.password[0]\n                    vm.validator.password.last = vm.form.password\n                  }\n                  vm.$store.dispatch(AUTH_ERROR, error.response.data.errors)\n                  return\n                }\n                vm.$store.dispatch(AUTH_ERROR, ['Error occured while login.'])\n                vm.$bvModal.show('modal-error')\n              })\n        },\n        onShowPassword() {\n          if (this.isShowPassword) {\n            this.isShowPassword = false\n          } else {\n            this.isShowPassword = true\n          }\n        },\n        validate() {\n          var vm = this\n\n          vm.validator.email.blured = true\n          vm.validator.password.blured = true\n\n          if (vm.validEmail(vm.form.email) && vm.validPassword(vm.form.password)) {\n            return true\n          } else {\n            return false\n          }\n        },\n        validEmail(email) {\n            var vm = this\n\n            if (email == vm.validator.email.last) {\n                return\n            }\n\n            vm.validator.email.error = false\n            vm.validator.email.last = ''\n\n            var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n            vm.validator.email.valid = re.test(email)\n\n            var isValid = re.test(email)\n            if (isValid) {\n                return true\n            } else {\n                vm.validator.email.valid = false\n                vm.validator.email.text = 'Please input a valid Email'\n                return false\n            }\n        },\n        validPassword(password) {\n            var vm = this\n\n            if (password == vm.validator.password.last) {\n                return\n            }\n\n            vm.validator.password.error = false\n            vm.validator.password.last = ''\n\n            if (password.length < 6 || password.length > 12) {\n                vm.validator.password.valid = false\n                vm.validator.password.text = 'Password must be 6 ~ 12 length characters'\n                return false\n            } else if (!(/[a-z]/.test(password))) {\n                vm.validator.password.valid = false\n                vm.validator.password.text = 'Password must contain at least 1 lower case letter'\n                return false\n            } else if (!(/[A-Z]/.test(password))) {\n                vm.validator.password.valid = false\n                vm.validator.password.text = 'Password must contain at least 1 capital letter'\n                return false\n            } else if (!(/[0-9]/.test(password))) {\n                vm.validator.password.valid = false\n                vm.validator.password.text = 'Password must contain at least 1 number'\n                return false\n            } else if (!(/[!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~]/.test(password))) {\n                vm.validator.password.valid = false\n                vm.validator.password.text = 'Password must contain at least 1 special character'\n                return false\n            }\n\n            return true\n        },\n\n        /** Facebook OAuth */\n        getFBUserData() {\n            var vm = this\n            vm.FB.api('/me', 'GET', { fields: 'id, name, first_name, last_name, email' },\n                user => {\n                    console.log(\"data api\", user)\n\n                    vm.personalID = user.id\n                    vm.sform.email = user.email\n                    vm.sform.password = 'fbCSpwd1!'\n                    vm.sform.provider_name = 'facebook'\n                    vm.sform.first_name = user.first_name || ' '\n                    vm.sform.last_name = user.last_name || ' '\n\n                    if (vm.isFBSuccess && vm.isFBConnected) {\n                        vm.loginWithSocial()\n                    }\n                }\n            )\n        },\n        onFBSdkLoaded(payload) {\n            this.isFBConnected = payload.isFBConnected\n            this.FB = payload.FB\n            this.$store.dispatch(AUTH_SET_FB, payload.FB)\n            if (this.isFBConnected) {\n                this.getFBUserData()\n            }\n        },\n        onFBLogin() {\n            this.isFBConnected = true\n            this.isFBSuccess = true\n            this.getFBUserData()\n        },\n        onFBLogout() {\n            this.isFBConnected = false\n        },\n\n        /** Google OAuth */\n        onGLoginSuccess(gUser) {\n            var vm = this\n            var profile = gUser.getBasicProfile()\n\n            vm.sform.email = profile.getEmail()\n            vm.sform.password = 'gCSpwd2@'\n            vm.sform.provider_name = 'google'\n            vm.sform.first_name = profile.getGivenName() || ' '\n            vm.sform.last_name = profile.getFamilyName() || ' '\n            \n            vm.loginWithSocial()\n        },\n        onGLoginFailure(error) {\n            console.log(error)\n        },\n\n        /** Line OAuth */\n        onLLoginDone(email) {\n            var vm = this\n\n            vm.sform.email = email\n            vm.sform.password = 'lCSpwd2@'\n            vm.sform.provider_name = 'line'\n            vm.sform.first_name = ' '\n            vm.sform.last_name = ' '\n\n            vm.form.email = email\n            vm.form.password = 'lCSpwd2@'\n\n            // vm.onLogin()\n            vm.loginWithSocial()\n        },\n\n        /** Kakao OAuth */\n        onKakaoLoginSuccess(data) {\n            var vm = this\n            axios.post(vm.server_url+'/api/auth/kprofile', {\n                'token_type': data.token_type,\n                'access_token': data.access_token\n            }, {\n                header: null\n            }).then(response => {\n                console.log(response.data)\n                vm.sform.email = response.data.kakao_account.email\n                vm.sform.password = 'KCSpwd2@'\n                vm.sform.provider_name = 'kakao'\n                vm.sform.first_name = response.data.properties.nickname || ' '\n                vm.sform.last_name = ' '\n\n                vm.loginWithSocial()\n            })\n        },\n        onKakaoLoginFailure(error) {\n            console.log(error)\n        },\n\n        /** Social OAuth Integration */\n        loginWithSocial() {\n            var vm = this\n            vm.isLoginFailed = false\n            vm.pageLoading = true\n\n            vm.login(vm.sform)\n                .then(response => {\n                    vm.$store.dispatch(AUTH_REQUEST, response.data)\n                    vm.clearSForm()\n                    vm.toHome()\n\n                    vm.pageLoading = false\n                })\n                .catch(error => {\n                    if (error.response.status == 404) {\n                        vm.signupWithSocial()\n                        return\n                    } else if (error.response.status == 422) {\n                        vm.clearSForm()\n                    } else if (error.response.status == 401) {\n                        vm.clearSForm()\n                    } else {\n                        vm.clearSForm()\n                    }\n                    vm.isLoginFailed = true\n                    vm.pageLoading = false\n                    if (error.response.data.errors.email) {\n                        vm.$store.dispatch(AUTH_ERROR, error.response.data.errors.email)\n                    } else if (error.response.data.errors.password) {\n                        vm.$store.dispatch(AUTH_ERROR, error.response.data.errors.password)\n                    } else {\n                        vm.$store.dispatch(AUTH_ERROR, [\"Error occured while social log in\"])\n                    }\n\n                    vm.$bvModal.show('modal-error')\n                })\n        },\n        signupWithSocial() {\n            var vm = this\n            vm.sform.password_confirmation = vm.sform.password\n\n            localStorage.setItem('signup-form', JSON.stringify(vm.sform))\n\n            vm.signup(vm.sform)\n                .then(response => {\n                    vm.loginAfterSocialSignup()\n                })\n                .catch(error => {\n                    vm.clearSForm()\n\n                    if (error.response.data.errors.email) {\n                        vm.$store.dispatch(AUTH_ERROR, error.response.data.errors.email)\n                    } else if (error.response.data.errors.password) {\n                        vm.$store.dispatch(AUTH_ERROR, error.response.data.errors.password)\n                    } else {\n                        vm.$store.dispatch(AUTH_ERROR, [\"Error occured while social sign up\"])\n                    }\n\n                    vm.$bvModal.show('modal-error')\n                })\n        },\n        loginAfterSocialSignup() {\n            var vm = this\n            vm.isLoginFailed = false\n            vm.pageLoading = true\n\n            vm.login(vm.sform)\n                .then(response => {\n                    vm.$store.dispatch(AUTH_REQUEST, response.data)\n                    vm.clearSForm()\n                    vm.toHome()\n\n                    vm.pageLoading = false\n                })\n                .catch(error => {\n                    vm.clearSForm()\n                    vm.isLoginFailed = true\n                    vm.pageLoading = false\n\n                    if (error.response.data.errors.email) {\n                        vm.$store.dispatch(AUTH_ERROR, error.response.data.errors.email)\n                    } else if (error.response.data.errors.password) {\n                        vm.$store.dispatch(AUTH_ERROR, error.response.data.errors.password)\n                    } else {\n                        vm.$store.dispatch(AUTH_ERROR, [\"Error occured while log in\"])\n                    }\n\n                    vm.$bvModal.show('modal-error')\n                })\n        },\n        toSignup() {\n            this.$router.push({ name: 'Signup' })\n        },\n        toPassword() {\n            this.$router.push({ name: 'ForgotPassword' })\n        },\n        toHome() {\n            this.$router.push({ name: 'LandingPage' })\n        },\n        toUpload() {\n          \n        },\n        stringToURL(str) {\n          return encodeURIComponent(str)\n        },\n        clearSForm() {\n            var vm = this\n            vm.sform.first_name = ''\n            vm.sform.last_name = ''\n            vm.sform.email = ''\n            vm.sform.password = ''\n            vm.sform.remember_me = false\n            vm.sform.provider_name = ''\n        }\n    }\n}\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkHA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/authentication","sourcesContent":["<template>\n  <b-container fluid class=\"auth-page login\" style=\"position: relative; display: inline-block;\">\n\n    <custom-loader :own-loading=\"pageLoading\" :no-sidebar=\"nosidebar\"></custom-loader>\n\n    <error></error>\n\n    <b-row class=\"container header\">\n      <b-col md=\"12\">\n        <AuthHeader />\n      </b-col>\n    </b-row>\n\n    <b-row class=\"auth-form\">\n      <b-col lg=\"5\" md=\"8\" offset-md=\"2\" class=\"wrapper\">\n        <b-form @submit.prevent=\"onLogin\">\n          <h3 class=\"form-title\">{{ $t(\"auth.signintitle\") }}</h3>\n          <span class=\"form-subtitle text-gray\">{{ $t(\"auth.signinsubtitle\") }}&nbsp;<b-link href=\"javascript:;\" @click=\"toSignup\" class=\"text-coffee-light link\">{{ $t(\"auth.signinsubtitle2\") }}</b-link></span>\n          <b-form-group id=\"grpEmail\"\n                        :class=\"{\n                          'form-group-withicon': true,\n                          'form-group-focus': validator.email.focus && !validator.email.error && (!validator.email.blured || validEmail(form.email)),\n                          'form-group-invalid': !validEmail(form.email) && validator.email.blured,\n                          'form-group-valid': validator.email.blured && (validEmail(form.email) && !validator.email.error)\n                        }\">\n            <b-form-input id=\"email\"\n                        :class=\"{\n                          'form-control-coffee': true,\n                          'input-invalid': !validEmail(form.email) && validator.email.blured,\n                          'input-valid': validator.email.blured && (validEmail(form.email) && !validator.email.error)\n                        }\"\n                        @blur=\"validator.email.blured = true, validator.email.focus = false\"\n                        @focus=\"validator.email.focus = true\"\n                        type=\"email\"\n                        v-model=\"form.email\"\n                        :placeholder=\"$t('auth.input.email')\"\n                        autocomplete=\"username\">\n            </b-form-input>\n            <font-awesome-icon icon=\"envelope-open\" />\n            <p class=\"validation-error\" v-if=\"!validEmail(form.email) && validator.email.blured\">{{ validator.email.text }}</p>\n          </b-form-group>\n          <b-form-group id=\"grpPassword\"\n                        :class=\"{\n                          'form-group-withicon': true,\n                          'form-group-focus': validator.password.focus && !validator.password.error && (!validator.password.blured || validPassword(form.password)),\n                          'form-group-password': true,\n                          'form-group-invalid': validator.password.blured && !validPassword(form.password),\n                          'form-group-valid': validator.password.blured && (validPassword(form.password) && !validator.password.error)\n                        }\">\n            <b-form-input id=\"password\"\n                        :class=\"{\n                          'form-control-coffee': true,\n                          'password': true,\n                          'input-valid': validator.password.blured && (validPassword(form.password) && !validator.password.error),\n                          'input-invalid': !validPassword(form.password) && validator.password.blured\n                        }\"\n                        @blur=\"validator.password.blured = true, validator.password.focus = false\"\n                        @focus=\"validator.password.focus = true\"\n                        :type=\"isShowPassword?'text':'password'\"\n                        v-model=\"form.password\"\n                        :placeholder=\"$t('auth.input.password')\"\n                        autocomplete=\"current-password\">\n            </b-form-input>\n            <div class=\"eye\" @click=\"onShowPassword\"><font-awesome-icon icon=\"eye-slash\" v-if=\"isShowPassword\" /><font-awesome-icon icon=\"eye\" v-else /></div>\n            <font-awesome-icon icon=\"lock\" />\n            <p class=\"validation-error\" v-if=\"!validPassword(form.password) && validator.password.blured\">{{ validator.password.text }}</p>\n          </b-form-group>\n          <b-form-group id=\"remember\">\n            <b-form-checkbox id=\"remember_me\"\n                          class=\"form-checkbox-coffee pull-left\"\n                          v-model=\"form.remember_me\">{{ $t(\"auth.input.remember\") }}\n            </b-form-checkbox>\n            <b-link href=\"javascript:;\" @click=\"toPassword\" class=\"text-coffee-light link pull-right\">{{ $t(\"auth.input.forgot\") }}</b-link>\n          </b-form-group>\n\n          <input type=\"submit\" class=\"btn btn-block btn-md btn-coffee\" :value=\"$t('auth.button.signin')\"/>\n        </b-form>\n        <div class=\"signup-withsocial\">\n          <p class=\"text-gray\">{{ $t(\"auth.socincomment\") }}</p>\n          <div class=\"social-links\">\n            <facebook-login \n              :appId=\"fbAppId\" \n              class=\"button btn-facebook\" \n              @login=\"onFBLogin\" \n              @logout=\"onFBLogout\" \n              @sdk-loaded=\"onFBSdkLoaded\" \n              :key=\"fbkey\">\n            </facebook-login>\n            <GoogleLogin \n              class=\"button btn-google\" \n              :params=\"googleLoginParams\" \n              :onSuccess=\"onGLoginSuccess\" \n              :onFailure=\"onGLoginFailure\">\n            </GoogleLogin>\n            <b-link :href=\"`https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=${lineLoginParams.client_id}&redirect_uri=${server_url}/api/auth/lineauth&state=login12&scope=${this.stringToURL(lineLoginParams.scope)}`\">\n              <img src=\"/img/social/line.png\"/>\n            </b-link>\n            <KakaoLogin :api-key=\"kakaoLoginParams.api_key\" :on-success=\"onKakaoLoginSuccess\" :on-failure=\"onKakaoLoginFailure\" />\n          </div>\n\n          <!-- <div class=\"social-links\">\n            <facebook-login appId=\"2349951131937784\" class=\"button btn-facebook\" @login=\"onFBLogin\" @logout=\"onFBLogout\" @sdk-loaded=\"onFBSdkLoaded\" :key=\"fbkey\"></facebook-login>\n            <GoogleLogin class=\"button btn-google\" :params=\"googleLoginParams\" :onSuccess=\"onGLoginSuccess\" :onFailure=\"onGLoginFailure\"></GoogleLogin>\n            <b-link href=\"https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=1592490922&redirect_uri=https://www.coffeesign.io/api/auth/lineauth&state=signup12&scope=openid%20email\"><img src=\"/img/social/line.png\"/></b-link>\n            <KakaoLogin api-key=\"b2f99b39dd3b4d340a7c0ef10260c2e4\" :on-success=\"onKakaoLoginSuccess\" :on-failure=\"onKakaoLoginFailure\" />\n          </div> -->\n\n        </div>\n      </b-col>\n    </b-row>\n  </b-container>\n</template>\n\n<script>\nimport { mapGetters, mapState } from 'vuex'\nimport axios from 'axios'\nimport jwtDecode from 'jwt-decode'\nimport facebookLogin from 'facebook-login-vuejs'\nimport GoogleLogin from 'vue-google-login'\nimport KakaoLogin from 'vue-kakao-login'\n\nimport { AUTH_REQUEST, AUTH_SUCCESS, AUTH_ERROR, AUTH_MODAL_BTN, AUTH_SET_FB } from '../../store/actions.type'\nimport { authentication } from '../../mixins/authentication'\nimport store from '../../store/store'\nimport { CHANGE_LANGUAGE_ACTION } from '../../store/actions.type'\nimport { LANGUAGES } from '../../i18n'\nimport AuthHeader from './AuthHeader'\nimport Error from '../../components/common/Error.modal'\nimport CustomLoader from '../../components/common/CustomLoader'\n\n// import '../../../scss/custom.scss';\nexport default {\n    name: \"Login\",\n    components: {\n      'custom-loader': CustomLoader,\n      Error, AuthHeader,\n      facebookLogin, GoogleLogin, KakaoLogin\n    },\n    mixins: [authentication],\n    data() {\n      return {\n        form: {\n          email: '',\n          password: '',\n          remember_me: false,\n        },\n        sform: {\n          first_name: '',\n          last_name: '',\n          email: '',\n          password: '',\n          password_confirmation: '',\n          remember_me: false,\n          provider_name: ''\n        },\n        validator: {\n          email: {\n            valid: true,\n            focus: false,\n            blured: false,\n            text: 'Please input a valid Email',\n            error: false,\n            last: ''\n          },\n          password: {\n            valid: true,\n            focus: false,\n            blured: false,\n            text: 'Password must be 6 ~ 12 length characters',\n            error: false,\n            last: ''\n          },\n        },\n        isLoginFailed: false,\n        isShowPassword: false,\n        pageLoading: false,\n        nosidebar: true,\n        languages: LANGUAGES,\n        testval: 'Test',\n\n        /** URL Integration */\n        client_url: process.env.VUE_APP_URL,\n        server_url: process.env.VUE_APP_SERVER_URL,\n        /** Facebook OAuth */\n        FB: undefined,\n        fbAppId: process.env.VUE_APP_FB_APP_ID,\n        isFBSuccess: false,\n        isFBConnected: false,\n        fbkey: 0,\n        /** Google OAuth2 */\n        googleLoginParams: {\n          client_id: process.env.VUE_APP_GOOGLE_CLIENT_ID\n        },\n        /** Line OAuth2 */\n        lineLoginParams: {\n          client_id: process.env.VUE_APP_LINE_CLIENT_ID,\n          scope: process.env.VUE_APP_LINE_SCOPE\n        },\n        /** Kakao OAuth */\n        kakaoLoginParams: {\n          api_key: process.env.VUE_APP_KAKAO_API_KEY\n        }\n      }\n    },\n    computed: {\n      ...mapGetters(['USER', 'loading', 'errors']),\n    },\n    mounted() {\n      this.FB = this.$store.getters.FB      \n\n      if (this.$route.params.email != undefined) {\n        this.onLLoginDone(this.$route.params.email)\n      } else {\n        if (this.FB == null) {\n          this.fbkey += 1\n          return\n        }\n      }\n    },\n    methods: {\n        onLogin(evt) {\n            var vm = this\n            vm.isLoginFailed = false\n            vm.pageLoading = true\n            \n            if (!vm.validate()) {\n              vm.pageLoading = false\n              return\n            }\n\n            vm.login(vm.form)\n              .then(response => {\n                vm.$store.dispatch(AUTH_REQUEST, response.data)\n                  .then(response => {\n                    response && response.data && vm.toHome();\n\n                    vm.pageLoading = !response\n                  })                          \n              })\n              .catch(error => {\n                console.log(error.response)\n                vm.isLoginFailed = true\n                vm.pageLoading = false\n                if (error.response.status == 422) {\n                  vm.$store.dispatch(AUTH_ERROR, error.response.data.errors)\n                } else if (error.response.status == 401) {\n                  var errors = error.response.data.errors\n                  if (errors.email) {\n                    vm.validator.email.error = true\n                    vm.validator.email.text = errors.email[0]\n                    vm.validator.email.last = vm.form.email\n                  } else if (errors.password) {\n                    vm.validator.password.error = true\n                    vm.validator.password.text = errors.password[0]\n                    vm.validator.password.last = vm.form.password\n                  }\n                  vm.$store.dispatch(AUTH_ERROR, error.response.data.errors)\n                  return\n                }\n                vm.$store.dispatch(AUTH_ERROR, ['Error occured while login.'])\n                vm.$bvModal.show('modal-error')\n              })\n        },\n        onShowPassword() {\n          if (this.isShowPassword) {\n            this.isShowPassword = false\n          } else {\n            this.isShowPassword = true\n          }\n        },\n        validate() {\n          var vm = this\n\n          vm.validator.email.blured = true\n          vm.validator.password.blured = true\n\n          if (vm.validEmail(vm.form.email) && vm.validPassword(vm.form.password)) {\n            return true\n          } else {\n            return false\n          }\n        },\n        validEmail(email) {\n            var vm = this\n\n            if (email == vm.validator.email.last) {\n                return\n            }\n\n            vm.validator.email.error = false\n            vm.validator.email.last = ''\n\n            var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n            vm.validator.email.valid = re.test(email)\n\n            var isValid = re.test(email)\n            if (isValid) {\n                return true\n            } else {\n                vm.validator.email.valid = false\n                vm.validator.email.text = 'Please input a valid Email'\n                return false\n            }\n        },\n        validPassword(password) {\n            var vm = this\n\n            if (password == vm.validator.password.last) {\n                return\n            }\n\n            vm.validator.password.error = false\n            vm.validator.password.last = ''\n\n            if (password.length < 6 || password.length > 12) {\n                vm.validator.password.valid = false\n                vm.validator.password.text = 'Password must be 6 ~ 12 length characters'\n                return false\n            } else if (!(/[a-z]/.test(password))) {\n                vm.validator.password.valid = false\n                vm.validator.password.text = 'Password must contain at least 1 lower case letter'\n                return false\n            } else if (!(/[A-Z]/.test(password))) {\n                vm.validator.password.valid = false\n                vm.validator.password.text = 'Password must contain at least 1 capital letter'\n                return false\n            } else if (!(/[0-9]/.test(password))) {\n                vm.validator.password.valid = false\n                vm.validator.password.text = 'Password must contain at least 1 number'\n                return false\n            } else if (!(/[!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~]/.test(password))) {\n                vm.validator.password.valid = false\n                vm.validator.password.text = 'Password must contain at least 1 special character'\n                return false\n            }\n\n            return true\n        },\n\n        /** Facebook OAuth */\n        getFBUserData() {\n            var vm = this\n            vm.FB.api('/me', 'GET', { fields: 'id, name, first_name, last_name, email' },\n                user => {\n                    console.log(\"data api\", user)\n\n                    vm.personalID = user.id\n                    vm.sform.email = user.email\n                    vm.sform.password = 'fbCSpwd1!'\n                    vm.sform.provider_name = 'facebook'\n                    vm.sform.first_name = user.first_name || ' '\n                    vm.sform.last_name = user.last_name || ' '\n\n                    if (vm.isFBSuccess && vm.isFBConnected) {\n                        vm.loginWithSocial()\n                    }\n                }\n            )\n        },\n        onFBSdkLoaded(payload) {\n            this.isFBConnected = payload.isFBConnected\n            this.FB = payload.FB\n            this.$store.dispatch(AUTH_SET_FB, payload.FB)\n            if (this.isFBConnected) {\n                this.getFBUserData()\n            }\n        },\n        onFBLogin() {\n            this.isFBConnected = true\n            this.isFBSuccess = true\n            this.getFBUserData()\n        },\n        onFBLogout() {\n            this.isFBConnected = false\n        },\n\n        /** Google OAuth */\n        onGLoginSuccess(gUser) {\n            var vm = this\n            var profile = gUser.getBasicProfile()\n\n            vm.sform.email = profile.getEmail()\n            vm.sform.password = 'gCSpwd2@'\n            vm.sform.provider_name = 'google'\n            vm.sform.first_name = profile.getGivenName() || ' '\n            vm.sform.last_name = profile.getFamilyName() || ' '\n            \n            vm.loginWithSocial()\n        },\n        onGLoginFailure(error) {\n            console.log(error)\n        },\n\n        /** Line OAuth */\n        onLLoginDone(email) {\n            var vm = this\n\n            vm.sform.email = email\n            vm.sform.password = 'lCSpwd2@'\n            vm.sform.provider_name = 'line'\n            vm.sform.first_name = ' '\n            vm.sform.last_name = ' '\n\n            vm.form.email = email\n            vm.form.password = 'lCSpwd2@'\n\n            // vm.onLogin()\n            vm.loginWithSocial()\n        },\n\n        /** Kakao OAuth */\n        onKakaoLoginSuccess(data) {\n            var vm = this\n            axios.post(vm.server_url+'/api/auth/kprofile', {\n                'token_type': data.token_type,\n                'access_token': data.access_token\n            }, {\n                header: null\n            }).then(response => {\n                console.log(response.data)\n                vm.sform.email = response.data.kakao_account.email\n                vm.sform.password = 'KCSpwd2@'\n                vm.sform.provider_name = 'kakao'\n                vm.sform.first_name = response.data.properties.nickname || ' '\n                vm.sform.last_name = ' '\n\n                vm.loginWithSocial()\n            })\n        },\n        onKakaoLoginFailure(error) {\n            console.log(error)\n        },\n\n        /** Social OAuth Integration */\n        loginWithSocial() {\n            var vm = this\n            vm.isLoginFailed = false\n            vm.pageLoading = true\n\n            vm.login(vm.sform)\n                .then(response => {\n                    vm.$store.dispatch(AUTH_REQUEST, response.data)\n                    vm.clearSForm()\n                    vm.toHome()\n\n                    vm.pageLoading = false\n                })\n                .catch(error => {\n                    if (error.response.status == 404) {\n                        vm.signupWithSocial()\n                        return\n                    } else if (error.response.status == 422) {\n                        vm.clearSForm()\n                    } else if (error.response.status == 401) {\n                        vm.clearSForm()\n                    } else {\n                        vm.clearSForm()\n                    }\n                    vm.isLoginFailed = true\n                    vm.pageLoading = false\n                    if (error.response.data.errors.email) {\n                        vm.$store.dispatch(AUTH_ERROR, error.response.data.errors.email)\n                    } else if (error.response.data.errors.password) {\n                        vm.$store.dispatch(AUTH_ERROR, error.response.data.errors.password)\n                    } else {\n                        vm.$store.dispatch(AUTH_ERROR, [\"Error occured while social log in\"])\n                    }\n\n                    vm.$bvModal.show('modal-error')\n                })\n        },\n        signupWithSocial() {\n            var vm = this\n            vm.sform.password_confirmation = vm.sform.password\n\n            localStorage.setItem('signup-form', JSON.stringify(vm.sform))\n\n            vm.signup(vm.sform)\n                .then(response => {\n                    vm.loginAfterSocialSignup()\n                })\n                .catch(error => {\n                    vm.clearSForm()\n\n                    if (error.response.data.errors.email) {\n                        vm.$store.dispatch(AUTH_ERROR, error.response.data.errors.email)\n                    } else if (error.response.data.errors.password) {\n                        vm.$store.dispatch(AUTH_ERROR, error.response.data.errors.password)\n                    } else {\n                        vm.$store.dispatch(AUTH_ERROR, [\"Error occured while social sign up\"])\n                    }\n\n                    vm.$bvModal.show('modal-error')\n                })\n        },\n        loginAfterSocialSignup() {\n            var vm = this\n            vm.isLoginFailed = false\n            vm.pageLoading = true\n\n            vm.login(vm.sform)\n                .then(response => {\n                    vm.$store.dispatch(AUTH_REQUEST, response.data)\n                    vm.clearSForm()\n                    vm.toHome()\n\n                    vm.pageLoading = false\n                })\n                .catch(error => {\n                    vm.clearSForm()\n                    vm.isLoginFailed = true\n                    vm.pageLoading = false\n\n                    if (error.response.data.errors.email) {\n                        vm.$store.dispatch(AUTH_ERROR, error.response.data.errors.email)\n                    } else if (error.response.data.errors.password) {\n                        vm.$store.dispatch(AUTH_ERROR, error.response.data.errors.password)\n                    } else {\n                        vm.$store.dispatch(AUTH_ERROR, [\"Error occured while log in\"])\n                    }\n\n                    vm.$bvModal.show('modal-error')\n                })\n        },\n        toSignup() {\n            this.$router.push({ name: 'Signup' })\n        },\n        toPassword() {\n            this.$router.push({ name: 'ForgotPassword' })\n        },\n        toHome() {\n            this.$router.push({ name: 'LandingPage' })\n        },\n        toUpload() {\n          \n        },\n        stringToURL(str) {\n          return encodeURIComponent(str)\n        },\n        clearSForm() {\n            var vm = this\n            vm.sform.first_name = ''\n            vm.sform.last_name = ''\n            vm.sform.email = ''\n            vm.sform.password = ''\n            vm.sform.remember_me = false\n            vm.sform.provider_name = ''\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n// @import \"./authentication.scss\";\n  .text {\n    position: absolute;\n    z-index: 999;\n    margin: 0 auto;\n    left: 0;\n    right: 0;        \n    text-align: center;\n    top: 50%; /* Adjust this value to move the positioned div up and down */\n    background: rgba(224, 224, 224, 0.2);\n    width: 100%; /* Set the width of the positioned div */\n    height: 50%;\n  }\n  .text2 {\n    position: absolute;\n    z-index: 999;\n    margin: 0 auto;\n    left: 0;\n    right: 0;        \n    text-align: center;\n    bottom: 50%; /* Adjust this value to move the positioned div up and down */\n    background: rgba(224, 224, 224, 0.2);\n    width: 100%; /* Set the width of the positioned div */\n    height: 50%;\n  }\n</style>\n"]}]}